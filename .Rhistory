library(tidyverse)
police <- read_csv("https://raw.githubusercontent.com/nuitrcs/r-tidyverse/main/data/ev_police.csv",
col_types=c( "location"="c"))
names(police)
select(police, outcome, date)
select(police, raw_DriverRace:raw_ResultOfStop)
select(police, 26:29)
select(police, last_col())
select(police, last_col(0:3))
?last_col
select(police, last_col(4))
select(police, last_col(3))
select(police, last_col(3):)
select(police, last_col(3):-1)
select(police, 0:last_col(3))
select(police, last_col(3):last_col())
select(police, last_col(3))
select(police, last_col(3, vars = 1))
select(police, last_col(3, vars = 4))
select(police, last_col(3))
names(police)
select(police, last_col(3))
select(police, last_col(3))
select(police, last_col(3):last_col())
select(police, -raw_row_number, -subject_age)
select(police, -raw_row_number, -subject_age, time:outcome)
select(police, location:type, -department_id)
select(police, outcome, everything())
select(police, raw_id=raw_row_number, date, time)
rename(police, raw_id = raw_row_number)
police <- rename(police, raw_id = raw_row_number)
police
police %>%
rename(age = subject_age, race = subject_race, sex = subject_sex)
police %>%
rename(age = subject_age, race = subject_race, sex = subject_sex) %>%
select(-department_id, -department_name)
select(police, starts_with("contraband"))
select(police, ends_with("issued"))
select(police, contains("vehicle"))
select(police, -contains("subject"))
select(police, starts_with("raw"))
select(police, -starts_with("raw"))
analysis_vars <- c("search_basis", "reason_for_stop")
select(police, search_basis, reason_for_stop)
select(police, analysis_vars)
select(police, all_of(analysis_vars))
select(police, where(is.numeric))
filter(police, date == "2017-01-02")
filter(police, subject_race == "hispanic" & subject_sex == "female")
police[police$subject_race == "hispanic" & police$subject_sex == "female", ]
filter(police, subject_race == "hispanic", subject_sex == "female")
names(police)
filter(police, location == "60201" | location == "60202")
filter(police, (location == "60201" | location == "60202") & subect_sex == "male")
filter(police, (location == "60201" | location == "60202") & subject_sex == "male")
filter(police, (location == "60201" | location == "60202") & subject_sex == "male")
filter(police, (location == "60201" | location == "60202"), subject_sex == "male")
filter(police, location == "60201" | location == "60202", subject_sex == "male")
filter(police, location == "60201" | location == "60202")
filter(police, (location == "60201" | location == "60202") & subject_sex == "male")
filter(police, (location == "60201" | location == "60202"), subject_sex == "male")
filter(police, location == "60201" | location == "60202", subject_sex == "male")
test1 <- filter(police, (location == "60201" | location == "60202") & subject_sex == "male")
test2 <- filter(police, (location == "60201" | location == "60202"), subject_sex == "male")
test3 <- filter(police, location == "60201" | location == "60202", subject_sex == "male")
unique(test1$subject_sex)
unique(test2$subject_sex)
unique(test3$subject_sex)
unique(test3$location)
unique(test2$location)
unique(test1$location)
mtcars
filter(mtcars, mpg > mean(mpg))
filter(mtcars, hp == max(hp))
filter(mtcars, min(disp))
mtcars
filter(mtcars, min_disp = min(disp))
filter(mtcars, min_disp == min(disp))
filter(mtcars, disp == min(disp))
filter(mtcars, disp == min(disp))
slice_max(mtcars, hp)
slice_max(mtcars, hp, n=3)
slice_min(mtcars, disp)
police %>%
mutate(vehicle_age = 2017 - vehicle_year) %>%
select(starts_with("vehicle"))  # just to pick a few columns to look at
mutate(
police,
vehicle_age = 2017 - vehicle_year,
old_car = vehicle_year < 2000
)
police %>%
mutate(
vehicle_age = 2017 - vehicle_year,
vehicle_age_norm = ifelse(
vehicle_age < 0,  # ifelse test condition
0,  # value if true
vehicle_age
)  # value if false
) %>%
# below is just making it easier for us to see what we changed
select(starts_with("vehicle")) %>%
filter(vehicle_age < 0)
police$location
?paste0
paste("a", "b")
paste0("a", "b")
police %>%
mutate(
location = as.character(location),  # first convert to character, then recode below
location = ifelse(
nchar(location) == 4,  # ifelse test (vector of TRUE and FALSE)
paste0("0", location), # value if TRUE
location # value if FALSE
)
) %>%
select(location) %>%  # selecting just the column we mutated to look at
filter(startsWith(location, "0"))  # selecting a few rows to look at the change
mutate(police, vehicle_make = na_if(vehicle_make, "UNK"))
mtcars
politce
police
mutate(
police,
beat = na_if(beat, "/"),
beat = na_if(beat, "CHICAGO")
)
test<- mutate(
police,
beat = na_if(beat, "/"),
beat = na_if(beat, "CHICAGO")
)
unique(police$beat)
unique(test$beat)
?na_if
